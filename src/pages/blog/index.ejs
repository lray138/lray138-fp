<%
	// var posts_list_items = `${readJson("blog-items.json")
	// 	.map(x => require("/partials/blog/list-item.ejs")(x))
	// 	.join('')}`;

	var posts_list_items = getAllMarkdownFiles('./src/content/blog')
		.map(x => {
			const path = x.replace('src/content/', '/').replace('.md', '.html');
        	const { data } = readMarkdown(x.replace('src/content/', ''));
        	return require("/partials/blog/list-item.ejs")({
        		...data,
        		href: path
        	})
		})
		.join('');
%>
<%- require("/templates/blog-landing.ejs")({
	site,
	page: {
		title: "Blog Landing",
		path
	},
	header: {...readJson("header.json"), current_page: page},
	posts_list: `<ul>${posts_list_items}</ul>`
})
%>